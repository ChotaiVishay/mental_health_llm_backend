# Mental Health Services Database Schema Documentation
# This file helps LangChain understand your database structure

database_info:
  name: "Mental Health Services Directory"
  description: "Comprehensive database of mental health services, organizations, and care providers"
  domain: "Mental Health and Wellness Services"

tables:
  # Core Entity Tables
  organisation:
    description: "Healthcare organizations that provide mental health services"
    primary_key: "organisation_key"
    columns:
      - name: "organisation_key"
        type: "uuid"
        description: "Unique identifier for the organization"
      - name: "organisation_name" 
        type: "text"
        description: "Name of the healthcare organization"
    relationships:
      - "One organization can have many campuses"
      - "One organization can offer many services"

  service:
    description: "Mental health services offered by organizations"
    primary_key: "service_key"
    columns:
      - name: "service_key"
        type: "uuid"
        description: "Unique identifier for the service"
      - name: "organisation_key"
        type: "uuid"
        description: "Foreign key to organisation table"
      - name: "service_name"
        type: "text"
        description: "Name of the mental health service"
    relationships:
      - "Each service belongs to one organization"
      - "Services are delivered at campuses (via service_campus)"

  campus:
    description: "Physical locations where organizations operate"
    primary_key: "campus_key"
    columns:
      - name: "campus_key"
        type: "uuid"
        description: "Unique identifier for the campus/location"
      - name: "organisation_key"
        type: "uuid"
        description: "Foreign key to organisation table"
      - name: "campus_name"
        type: "text"
        description: "Name of the campus or location"

  service_campus:
    description: "Junction table linking services to campuses with detailed information"
    primary_key: "service_campus_key"
    columns:
      - name: "service_campus_key"
        type: "uuid"
        description: "Unique identifier for service-campus combination"
      - name: "service_key"
        type: "uuid"
        description: "Foreign key to service table"
      - name: "campus_key"
        type: "uuid"
        description: "Foreign key to campus table"
      - name: "email"
        type: "text"
        description: "Contact email for this service at this location"
      - name: "phone"
        type: "text"
        description: "Contact phone number"
      - name: "website"
        type: "text"
        description: "Website URL for the service"
      - name: "expected_wait_time"
        type: "text"
        description: "Expected waiting time for appointments"
      - name: "address"
        type: "text"
        description: "Street address of the service location"
      - name: "suburb"
        type: "text"
        description: "Suburb/city where service is located"
      - name: "state"
        type: "text"
        description: "State where service is located"
      - name: "postcode"
        type: "text"
        description: "Postal code of the service location"
      - name: "eligibility_and_description"
        type: "text"
        description: "Who can access this service and what it provides"

  # Comprehensive Staging Table
  staging_services:
    description: "Denormalized table with complete service information - best for search queries"
    primary_key: "id"
    columns:
      - name: "organisation_name"
        type: "text"
        description: "Name of the organization providing the service"
      - name: "service_name"
        type: "text"
        description: "Name of the mental health service"
      - name: "campus_name"
        type: "text"
        description: "Location name where service is provided"
      - name: "region_name"
        type: "text"
        description: "Geographic region served"
      - name: "address"
        type: "text"
        description: "Full address of service location"
      - name: "suburb"
        type: "text"
        description: "Suburb/city"
      - name: "state"
        type: "text"
        description: "Australian state"
      - name: "postcode"
        type: "text"
        description: "Postal code"
      - name: "phone"
        type: "text"
        description: "Contact phone number"
      - name: "email"
        type: "text"
        description: "Contact email"
      - name: "website"
        type: "text"
        description: "Service website"
      - name: "cost"
        type: "text"
        description: "Cost information (free, bulk-billed, private, etc.)"
      - name: "delivery_method"
        type: "text"
        description: "How service is delivered (face-to-face, telehealth, online, etc.)"
      - name: "level_of_care"
        type: "text"
        description: "Intensity of care provided"
      - name: "service_type"
        type: "text"
        description: "Type of mental health service"
      - name: "target_population"
        type: "text"
        description: "Who the service is designed for"
      - name: "workforce_type"
        type: "text"
        description: "Types of healthcare professionals involved"
      - name: "referral_pathway"
        type: "text"
        description: "How to access the service"
      - name: "expected_wait_time"
        type: "text"
        description: "How long to wait for an appointment"
      - name: "notes"
        type: "text"
        description: "Additional information about the service"

  # Lookup Tables
  service_type_lookup:
    description: "Types of mental health services available"
    lookup_table: true
    
  cost_lookup:
    description: "Cost categories (free, bulk-billed, private fee, etc.)"
    lookup_table: true
    
  delivery_method_lookup:
    description: "Methods of service delivery (in-person, telehealth, online, etc.)"
    lookup_table: true

  level_of_care_lookup:
    description: "Levels of care intensity"
    lookup_table: true

  referral_pathway_lookup:
    description: "How users can access services (self-referral, GP referral, etc.)"
    lookup_table: true

  target_population_lookup:
    description: "Demographics services are designed for"
    lookup_table: true

  workforce_type_lookup:
    description: "Types of healthcare professionals"
    lookup_table: true

  # Geographic Tables
  region:
    description: "Geographic regions for service coverage"
    primary_key: "region_key"
    
  # System Tables
  messages:
    description: "Chat messages for the mental health chatbot system"
    columns:
      - name: "session_id"
        type: "text"
        description: "Unique identifier for chat session"
      - name: "role"
        type: "text"
        description: "Message role (user, assistant, system)"
      - name: "content"
        type: "text"
        description: "Message content"
      - name: "created_at"
        type: "timestamp"
        description: "When message was created"

query_patterns:
  location_based:
    description: "Users asking for services in specific locations"
    examples:
      - "Find mental health services in Melbourne"
      - "What therapy is available in postcode 3000?"
    best_table: "staging_services"
    key_columns: ["suburb", "postcode", "state", "region_name"]

  service_type_based:
    description: "Users asking for specific types of services"
    examples:
      - "Find counseling services"
      - "I need therapy for anxiety"
    best_table: "staging_services"
    key_columns: ["service_type", "service_name", "notes"]

  cost_based:
    description: "Users asking about costs and affordability"
    examples:
      - "What free mental health services are available?"
      - "Find bulk-billed psychology services"
    best_table: "staging_services"
    key_columns: ["cost"]

  accessibility_based:
    description: "Users asking about access methods"
    examples:
      - "What online therapy is available?"
      - "Find telehealth mental health services"
    best_table: "staging_services"
    key_columns: ["delivery_method", "referral_pathway"]

recommendations:
  primary_query_table: "staging_services"
  reason: "Contains all service information in one place, making it ideal for natural language queries"
  
  join_when_needed:
    - "Use normalized tables (organisation, service, campus) for complex relationships"
    - "Use lookup tables to get full descriptions of codes"